!function(n){function d(d,e,o){n.post(d,e).done(function(){o()}).fail(function(){alert("Something went wrong :/"),o(!0)})}n.dingdong=function(e){var o={};e&&("object"===n.type(e)?o=e:"string"===n.type(e)?o.endpoint=e:"function"===n.type(e)?o.handler=e:console.error("dingdong argument should be object (options), string (custom endpoint), or function (custom handler) :/"));var i=!!o.fade,g=o.openFadeDuration||100,t=o.cancelFadeDuration||100,a=o.submitFadeDuration||1e3,s=o.buttonText="Feedback",r=o.emailPlaceholder||"Your email address",u=o.messagePlaceholder||"Send us your feedback or report an issue",l=o.submitButtonText||"Send message",c=o.submittedText||"Thanks!",p=o.messageRows||7,m=!!o.disableEscapeToCancel;o.endpoint||"/dingdong";n.dingdongShow=function(){n("#dingdong-submit").prop("disabled",!1),n("#dingdong-submit").text(l),n("#dingdong-message").val(""),i?n("#dingdong").fadeIn(g):n("#dingdong").show()},n.dingdongCancel=function(){i?n("#dingdong").fadeOut(t):n("#dingdong").hide()},n.dingdongHide=function(){i?n("#dingdong").fadeOut(a):n("#dingdong").hide(),n("#dingdong-submit").text(c).prop("disabled",!0)};var b;o.header&&(b=n("<div/>",{class:"dingdong-row"}).append(n("<div/>",{id:"dingdong-header",html:o.header}))),n("#dingdong-button").remove(),n("#dingdong").remove(),n("body").append(n("<button />",{id:"dingdong-button",style:"display: none",text:s})),n("body").append(n("<div/>",{id:"dingdong",style:"display: none"}).append(n("<div/>",{id:"dingdong-box"}).append(n("<div/>",{id:"dingdong-close",text:"\xd7"}),n("<form/>",{id:"dingdong-form"}).append(b,n("<div/>",{class:"dingdong-row"}).append(n("<input/>",{id:"dingdong-email",name:"email",type:"email",placeholder:r,required:"required"})),n("<div/>",{class:"dingdong-row"}).append(n("<textarea/>",{id:"dingdong-message",name:"message",rows:p,placeholder:u,required:"required"})),n("<button/>",{id:"dingdong-submit",type:"submit",text:l}))))),m||n(document).keydown(function(d){27==d.keyCode&&n.dingdongCancel()}),n("#dingdong-button").click(function(){n.dingdongShow()}),n("#dingdong, #dingdong-close").click(function(){n.dingdongCancel()}),n("#dingdong-box").click(function(n){n.stopPropagation()}),n("#dingdong-form").submit(function(e){function i(d){d?n("#dingdong-submit").prop("disabled",!1):n.dingdongHide()}e.preventDefault();var g={message:n("#dingdong-message").val(),email:n("#dingdong-email").val()};return n("#dingdong-submit").prop("disabled",!0),o.handler?o.handler(g,i):d(o.endpoint,g,i),!1})}}(jQuery);